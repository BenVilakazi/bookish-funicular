/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";let e=JSON.parse(localStorage.getItem("lists"))||["Sample List"],t=JSON.parse(localStorage.getItem("todos"))||[{list:"Sample List",todo:"Creating New Lists",dateAdd:"4/29/2021",dateComp:"N/A",priority:"Normal",notes:'Click the plus icon next to "Current lists" to add a new list. Type the name of the list and hit enter.'},{list:"Sample List",todo:"Click the priority button",dateAdd:"4/29/2021",dateComp:"N/A",priority:"Important",notes:"Clicking the priority button cycles through the different levels. Low, normal, and important."},{list:"Sample List",todo:"Double click to unmark a todo",dateAdd:"4/29/2021",dateComp:"4/29/2021",priority:"Normal",notes:"Double clicking marked todo sets it to uncompleted again."},{list:"Sample List",todo:"Double click a todo to mark as done",dateAdd:"4/29/2021",dateComp:"N/A",priority:"Low",notes:"Click the three line button to delete all completed todos, or click the trash icon to delete an indiviual todo."},{list:"Sample List",todo:"This is a todo",dateAdd:"4/29/2021",dateComp:"N/A",priority:"Normal",notes:"This is a note, notes are saved automatically."}];const o=()=>{localStorage.setItem("todos",JSON.stringify(t))},n=()=>{localStorage.setItem("lists",JSON.stringify(e))},i=document.getElementById("notes-text"),l=document.getElementById("date-added-text"),d=document.getElementById("date-completed-text"),s=document.getElementById("priority-button");let r;const c=()=>{console.log("filling current list");let e=[];const n=document.querySelector(".selected-list").innerHTML,c=document.getElementById("inner-active-list");e=t.filter((function(e){if(e.list==n)return!0})),c.innerHTML="",e.forEach((e=>{(e=>{let t=c.firstChild;const o=document.createElement("button");o.textContent=e.todo,o.classList.add("item"),o.classList.add(`${e.priority.toLowerCase()}-priority`),"N/A"!=e.dateComp&&o.classList.add("inactive"),c.insertBefore(o,t)})(e)})),c.firstChild.classList.add("selected-item"),t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;console.log("current todo "+t),e.todo==t&&(console.log(e),r=e,i.innerHTML=e.notes,l.innerHTML=`Date Added: ${e.dateAdd}`,d.innerHTML=`Date Completed: ${e.dateComp}`,s.textContent=e.priority,s.className=`${e.priority.toLowerCase()}-priority`)})),o()},a=()=>{const t=document.querySelector(".sidebar-section"),i=document.getElementById("sidebar-list-view");document.querySelector(".sidebar-add");let l="off";document.addEventListener("click",(e=>{if(e.target.matches(".sidebar-add")&&"off"==l){console.log("add");const e=document.createElement("input");Object.assign(e,{className:"input-box",maxlength:"20",id:"new-list-input",type:"text",placeholder:"New List"}),t.appendChild(e),e.focus(),e.onblur=()=>{e.remove(),l="off"},l="on",d()}else e.target.matches(".sidebar-add")&&"on"==l&&(document.getElementById("new-list-input").remove(),l="off")}));const d=()=>{const e=document.getElementById("new-list-input");e.addEventListener("keydown",(t=>{13===t.keyCode&&""!=e.value&&(console.log("enter create new list"),l="off",s(),m(e.value),e.remove())}))},s=()=>{const t=document.getElementById("new-list-input");e.push(t.value),n(),o(),console.log(e)};document.addEventListener("click",(e=>{e.target.matches(".sidebar-list")&&(r(e.target),c())}));const r=e=>{const t=document.querySelector(".selected-list");a(t,e),console.log("select list")},a=(e,t)=>{null==e||e.classList.remove("selected-list"),t.classList.add("selected-list")},m=e=>{const t=document.createElement("p");t.classList.add("sidebar-list"),i.appendChild(t),t.innerHTML=e,console.log("listactions")};e.forEach((e=>{m(e)})),i.firstElementChild.classList.add("selected-list")};console.log("index.js test"),a(),(()=>{document.addEventListener("dblclick",(e=>{e.target.matches(".inactive")?(e.target.classList.remove("inactive"),console.log("unmark"),a()):e.target.matches(".item")&&(e.target.classList.add("inactive"),console.log("mark as done"),a())})),(()=>{const i=document.getElementById("new-todo-input");i.addEventListener("keydown",(e=>{13===e.keyCode&&""!=i.value&&(console.log("enter create new todo"),l(),d(),c(),o())})),document.addEventListener("click",(e=>{e.target.matches("#add-item-button-icon")&&""!=i.value&&(console.log("click create new todo"),l(),d(),c(),o())}));const l=()=>{const e=document.getElementById("inner-active-list");let t=e.firstChild;const o=document.createElement("button");o.textContent=i.value,o.classList.add("item"),o.classList.add("normal-priority"),e.insertBefore(o,t),n(o)},d=()=>{((o,n,i,l,d,s)=>{const r=((e,t,o,n,i,l)=>({list:e,todo:t,dateAdd:o,dateComp:"N/A",priority:"Normal",notes:""}))(o,n,(new Date).toLocaleDateString());t.push(r),-1==e.indexOf(o)&&e.push(r.list)})(document.querySelector(".selected-list").innerHTML,i.value),i.value=""}})(),document.addEventListener("click",(e=>{e.target.matches(".item")&&(n(e.target),c())}));const n=e=>{var t,o;t=document.querySelector(".selected-item"),o=e,null==t||t.classList.remove("selected-item"),o.classList.add("selected-item"),console.log("select")},i=document.getElementById("notes-text"),l=document.getElementById("date-added-text"),d=document.getElementById("date-completed-text"),s=document.getElementById("priority-button");let r;const c=()=>{t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;console.log("current todo "+t),e.todo==t&&(console.log(e),r=e,i.innerHTML=e.notes,l.innerHTML=`Date Added: ${e.dateAdd}`,d.innerHTML=`Date Completed: ${e.dateComp}`,s.textContent=e.priority,s.className=`${e.priority.toLowerCase()}-priority`)}))},a=()=>{t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;e.todo==t&&"N/A"==e.dateComp?(d.innerHTML=`Date Completed: ${(new Date).toLocaleDateString()}`,e.dateComp=(new Date).toLocaleDateString()):e.todo==t&&"N/A"!=e.dateComp&&(d.innerHTML="Date Completed: N/A",e.dateComp="N/A"),o()}))},m=(e,t,o,n,i)=>{const l=document.querySelector(".selected-item");l.innerHTML,s.textContent=e,s.className=t,l.classList.remove(o),l.classList.add(n),i.priority=e};s.onclick=()=>{console.log("set priority"),t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;e.todo==t&&("Normal"==e.priority?m("Important","important-priority-button","normal-priority","important-priority",e):"Important"==e.priority?m("Low","low-priority-button","important-priority","low-priority",e):"Low"==e.priority&&m("Normal","normal-priority-button","low-priority","normal-priority",e))})),o()},i.onblur=()=>{r.notes=i.innerHTML,o()}})(),c(),(()=>{const i=document.getElementById("delete-all-button"),l=document.getElementById("delete-todo"),d=document.getElementById("sidebar-list-view");l.onclick=()=>{console.log("delete one"),t.filter((function(e){const o=document.querySelector(".selected-item").innerHTML;e.todo==o&&t.splice(t.indexOf(e),1)})),c(),o()},i.onclick=()=>{console.log("delete all"),t=t.filter((function(e){const t=document.querySelector(".selected-list").innerHTML;return e.list!=t||e.list==t&&"N/A"==e.dateComp})),c(),o()};document.getElementById("delete-list").onclick=()=>{console.log("list delete"),e.forEach((t=>{e.filter((function(t){t==document.querySelector(".selected-list").innerHTML&&e.splice(e.indexOf(t),1)}))})),t.forEach((e=>{t.filter((function(e){const o=document.querySelector(".selected-list").innerHTML;e.list==o&&t.splice(t.indexOf(e),1)}))})),d.innerHTML="",a(),c(),n()}})()})();